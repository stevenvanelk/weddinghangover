---
import Layout from '../layouts/Layout.astro';
import HeroImg from '../components/HeroImg.astro';
import { Image } from 'astro:assets';
import heroImg from '../images/links/links.webp';
import type { CollectionEntry } from "astro:content";
import { getCollection } from 'astro:content';
import "../styles/blogStyles.css";
import { formatDateUTC } from "../utils/formatDate";

const allPosts = await getCollection("blog");
const recentPosts = (allPosts as CollectionEntry<'blog'>[])
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 5);

const episodePosts = await getCollection("episodes");
const recentEpisodePost = (episodePosts as CollectionEntry<'episodes'>[])
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())[0];


---
<Layout>
    <Fragment slot="head">
      <title>Links | Wedding Photo Hangover</title>
      <link rel="canonical" href="https://weddinghangover.com/links" />
      <meta name="description" content="All the links you need from Wedding Photo Hangover: episodes, Patreon, YouTube, our Facebook group, and more." />

      <meta property="og:site_name" content="Wedding Photo Hangover - A Wedding Photography Podcast" />
      <meta property="og:title" content="Links | Wedding Photo Hangover" />
      <meta property="og:description" content="All the links you need from Wedding Photo Hangover: episodes, Patreon, YouTube, our Facebook group, and more." />
      <meta property="og:type" content="website" />
      <meta property="og:url" content="https://weddinghangover.com/links" />
      <meta property="og:image" content="/images/links/links.webp" />
      <meta property="og:image:width" content="1500" />
      <meta property="og:image:height" content="843" />

      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:title" content="Links | Wedding Photo Hangover" />
      <meta name="twitter:description" content="All the links you need from Wedding Photo Hangover: episodes, Patreon, YouTube, our Facebook group, and more." />
      <meta name="twitter:image" content="/images/links/links.webp" />
      <meta name="twitter:url" content="https://weddinghangover.com/links" />

      <meta itemprop="name" content="Links | Wedding Photo Hangover" />
      <meta itemprop="description" content="All the links you need from Wedding Photo Hangover: episodes, Patreon, YouTube, our Facebook group, and more." />
      <meta itemprop="url" content="https://weddinghangover.com/links" />
      <meta itemprop="image" content="/images/links/links.webp" />
      <link rel="preload" as="image" href={heroImg.src} type="image/webp" fetchpriority="high" />
    </Fragment>

<main>
    <HeroImg 
        title="Hot Links - Get 'Em Fresh" 
        background={heroImg} 
        />
  <div class="content-container-2">
  <section class="center-text">
    <h2 style="margin-bottom: 2rem;">Most Recent Episode</h2>
       <div class="spotify-embed-wrapper">
          <div
            class="spotify-placeholder"
            data-spotify-url="https://open.spotify.com/embed/show/09hCjT9XXAKzGin8bkLG3a?utm_source=generator&theme=0"
          >
            <div class="spotify-content">
              <img
                src="/images/global/WPH_Square_Logo-small.webp"
                alt="Wedding Photo Hangover Cover"
                class="spotify-cover"
              />
              <div class="spotify-text">
                <p class="spotify-title">Wedding Photo Hangover</p>
                <p class="spotify-subtitle">Tap to load the latest episode</p>
              </div>
              <div class="spotify-logo">
                <svg xmlns="http://www.w3.org/2000/svg" class="spotify-icon" viewBox="0 0 50 50">
                  <path d="M25.009,1.982C12.322,1.982,2,12.304,2,24.991S12.322,48,25.009,48s23.009-10.321,23.009-23.009S37.696,1.982,25.009,1.982z M34.748,35.333c-0.289,0.434-0.765,0.668-1.25,0.668c-0.286,0-0.575-0.081-0.831-0.252C30.194,34.1,26,33,22.5,33.001 c-3.714,0.002-6.498,0.914-6.526,0.923c-0.784,0.266-1.635-0.162-1.897-0.948s0.163-1.636,0.949-1.897 c0.132-0.044,3.279-1.075,7.474-1.077C26,30,30.868,30.944,34.332,33.253C35.022,33.713,35.208,34.644,34.748,35.333z M37.74,29.193 c-0.325,0.522-0.886,0.809-1.459,0.809c-0.31,0-0.624-0.083-0.906-0.26c-4.484-2.794-9.092-3.385-13.062-3.35 c-4.482,0.04-8.066,0.895-8.127,0.913c-0.907,0.258-1.861-0.272-2.12-1.183c-0.259-0.913,0.272-1.862,1.184-2.12 c0.277-0.079,3.854-0.959,8.751-1c4.465-0.037,10.029,0.61,15.191,3.826C37.995,27.328,38.242,28.388,37.74,29.193z M40.725,22.013 C40.352,22.647,39.684,23,38.998,23c-0.344,0-0.692-0.089-1.011-0.275c-5.226-3.068-11.58-3.719-15.99-3.725 c-0.021,0-0.042,0-0.063,0c-5.333,0-9.44,0.938-9.481,0.948c-1.078,0.247-2.151-0.419-2.401-1.495 c-0.25-1.075,0.417-2.149,1.492-2.4C11.729,16.01,16.117,15,21.934,15c0.023,0,0.046,0,0.069,0 c4.905,0.007,12.011,0.753,18.01,4.275C40.965,19.835,41.284,21.061,40.725,22.013z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      {recentEpisodePost && (
        <p style="margin-top: 1rem;">
            <a href={`/episodes/${recentEpisodePost.slug}`}>
            Tap here to see the episode show notes
            </a>
        </p>
        )}
  </section>

  <section class="center-text">
    <h2 style="margin-bottom: 2rem;">Links</h2>
    <div class="button-stack">
      <a href="/episodes" class="button-link">Episodes</a>
      <a href="https://www.patreon.com/WPH" class="button-link" target="_blank">Patreon</a>
      <a href="https://www.youtube.com/channel/UCdMqr4HWdKLAEevkr3XLYVA" class="button-link" target="_blank">Youtube</a>
      <a href="https://www.facebook.com/groups/weddinghangover/" class="button-link" target="_blank">Facebook Group</a>
      <a href="https://www.zazzle.com/store/weddinghangover" class="button-link" target="_blank">Zazzle Store</a>
    </div>
  </section>

  <section class="center-text">
    <h2 style="margin-bottom: 2rem;">Recent Blog Posts</h2>
    <div class="blog-list">
        {recentPosts.map((post) => (
        <div class="blog-card">
            <a href={`/blog/${post.slug}/`}>
            <img src={post.data.image} alt={post.data.title} class="blog-card-image" />
            </a>
            <div class="blog-card-content">
            <a href={`/blog/${post.slug}/`}>
                <h2 class="blog-card-title">{post.data.title}</h2>
            </a>
            <p class="blog-card-description">{post.data.description}</p>
            <a href={`/blog/${post.slug}/`}>
                <p class="blog-card-date">{formatDateUTC(post.data.pubDate)}</p>
            </a>
            </div>
        </div>
        ))}
    </div>
    </section>
  </div>
</main>
</Layout>